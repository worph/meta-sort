# meta-sort-core Environment Configuration
# Copy this file to .env and adjust values as needed

# =============================================================================
# Volume Paths
# =============================================================================

# Path to META_CORE_VOLUME - infrastructure volume for KV DB, locks, services
# This is where Redis data, leader election locks, and service discovery files are stored
META_CORE_PATH=/meta-core

# Path to FILES_VOLUME - shared media volume
# All file paths in the KV database are relative to this path
FILES_PATH=/files

# =============================================================================
# KV Storage Configuration
# =============================================================================

# Use legacy etcd mode instead of Redis (default: false)
# Set to 'true' to use etcd instead of Redis
USE_ETCD=false

# etcd API URL (only used if USE_ETCD=true)
# ETCD_URL=http://localhost:2379

# Direct Redis URL (skip leader election if provided)
# If set, the service will connect directly to this Redis instance
# instead of participating in leader election
# REDIS_URL=redis://localhost:6379

# Redis port for leader to listen on (default: 6379)
REDIS_PORT=6379

# =============================================================================
# Service Identity
# =============================================================================

# Service name for leader election and service discovery
SERVICE_NAME=meta-sort

# Service version
SERVICE_VERSION=1.0.0

# =============================================================================
# API Server
# =============================================================================

# FUSE API server port (default: 3000)
FUSE_API_PORT=3000

# FUSE API server host (default: localhost)
FUSE_API_HOST=0.0.0.0

# =============================================================================
# Processing Configuration
# =============================================================================

# Maximum number of worker threads for Piscina worker pool
# Default: CPU count
# MAX_WORKER_THREADS=16

# Interval in milliseconds for polling watch folders (0 to disable)
# WATCH_FOLDER_POOLING_INTERVAL_MS=0

# Metadata formats to generate: 'meta' (.meta YAML), 'jellyfin' (.nfo XML)
METADATA_FORMATS=meta

# =============================================================================
# Cache Configuration
# =============================================================================

# Path to hash index cache
INDEX_FOLDER_PATH=/data/cache/hash

# Path to plugin cache folder
CACHE_FOLDER_PATH=/data/cache/plugins

# =============================================================================
# Jellyfin Integration (Optional)
# =============================================================================

# Jellyfin server endpoint
# JELLYFIN_ENDPOINT=http://localhost:8096

# Jellyfin API key
# JELLYFIN_API_KEY=your-api-key-here

# =============================================================================
# Polling Paths (Optional)
# =============================================================================

# JSON array of polling path configurations for paths that don't support inotify
# Example: '[{"path": "/files/smb/downloads", "intervalMs": 60000}]'
# POLLING_PATHS=[]
